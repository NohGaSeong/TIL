# 라우터

## 라우터

### 정의

- 컴퓨터 네트워크 간에 데이터 패킷을 전송하는 네트워크 장치

### 특징

- 오류패킷의 폐기 기능과 혼합 제어 기능 수행
- 논리 주소에 따라 네트워크 트래픽의 방향을 지정
- 둘 이상의 네트워크를 연결하는데 사용
- 웹페이지 요청을 수신지로 전송하는데 결정적인 역할을 한다

## 라우팅 테이블

### 정의

- 라우터가 가지고 있는 ip 주소, 목적지를 설정(쉽게 말하면 라우팅을 효율적으로 하기 위한 데이터베이스라고 생각하면 좋음)

## 라우팅 프로토콜

### RIP(Routing Information Protocol)

- 최소 Hop count 를 파악하여 라우팅하는 프로토콜
- 홉(Hop)을 기준으로 하고 최대 15홉까지 지원하므로 큰 망에선 사용할 수 없다.
- 30초마다 모든 라우터에 정보를 업데이트한다.
- 180초 이내에 정보가 수신되지 않으면 해당 경로를 이상 상태로 간주한다.
- 거리 벡터 프로토콜이다.
- 최단 경로 탐색에는 Bellman-Ford 알고리즘을 사용한다.
#### 장점
- 경로 변화에 민감하게 반응하여 라우팅 정보를 갱신한다.
- 구조가 간단하여 프로세서에 부담이 적다.
#### 단점
- 브로드캐스팅 방식이므로 네트워크에 부하를 준다.
- 회선의 상태를 무시한 홉 수 계산 방식이므로 비효율적인 라우팅이 이루어질 수 있다.

### OSPF(Open Shortest Path First)

- RIP와 마찬가지로 Hop을 기준으로 하지만 Hop수에 제한이 없어 큰 망에서 사용할 수 있다.
- RIP처럼 30초에 한번씩 정보를 브로드캐스팅 하지 않고 변경된 정보가 있을때만 브로드캐스팅 한다.
- 다익스트라 알고리즘을 사용하는 링크 상태 프로토콜이다.
#### 장점
- 연결 속도를 중심으로 가중치를 두므로 좀 더 지능적인 라우팅이 가능하다.
#### 단점
- 라우팅 알고리즘이 복잡하여 프로세서에 부담을 준다.


## 라우팅 과정

1. 패킷을 수신하면 라우터는 ip 헤더의 수신지 ip 주소를 확인한다
2. 수신지 네트워크 주소를 바탕으로 라우터의 라우팅 테이블을 검색한다. 라우팅 테이블에는 수신지 네트워크와 서브넷 마스크, 해당 네트워크에 도달하기 위한 다음 단계의 중계 라우터, 전송을 위한 인터페이스가 기술되어있다.
3. 수신 경로를 확인한 후 ip  패킷의 라이프 타임 값에서 1을 빼고 ip 헤더의 검사합을 다시 게산하여 데이터링크 계층의 헤더를 교체한다.
4. 각 라우터나 레이어 3 스위치가 이러한 처리를 반복함으로써 다음 네트워크로 게속 중계한다.
