# Docker 란 뭐하는 고래일까?
## 그전에 MSA 등 사전지식들을 알아보자
- MSA = Micro Service Architecture = 서비스간의 의존성을 없애고 기능을 쪼개는 것을 중점적으로 설계한 아키텍처.
### 장점?
- 서비스 단위의 개발 가능
- 지속적인 통합과 배포(CI/CD)를 효율적으로 할 수 있음.
- 패치가 필요한 서비스만 배포하거나 Hotfix 를 빠르게 처리할 수 있음.
- 전체가 아닌 필요한 서비스에만 이중화를 할 수 있다.

### 단점?
- 서비스 단위다 보니까 관리하기 복잡하다는 단점이 있음.
- 근데 Docker 를 사용하면 이런 문제를 쉽게 해결 할 수 있음.

## 다른것들을 알아보자.
### laC(Infrastructure as Code)
- 도커가 MSA를 위한 기술은 아님. 테스트, 스테이징, 배포 등의 여러 용도로도 사용 가능함.
- 중요하게 봐야할 관점은 도커를 사용하면 laC가 가능함.
- 도커의 진짜 큰 힘은 인프라를 코드화해서 관리할 수 있따는 점임.

### Docker과 Container, 가상화
#### Container?
- 컨테이너 = Host OS 상에서 리소스를 논리적으로 구분하여 마치 별도의 서버인 것 처럼 사용할 수 있게 하는 기술.
- 논리적으로 구분한다 -> 물리적으로 구분하지 않기 때문에 쉽게 없애고 다시 생성할 수 있는 것. 이런 면에서 가볍다고 표현할 수 있음.

#### 컨테이너를 사용하는 이유
- 여러 애플리케이션에서 사용하고 있는 라이브러리나 미들웨어의 버전에 대한 충돌을 회피
- 이식성과 확작성이 좋다
    - 컨테이너 이미지 그대로 의존성 없이 다른 환경에서 실행 가능
    - 컨테이너를 여러 개 실행해서 이중화 가능

- 다양한 운영환경을 지원할 수 있다.

## 가상화 기술과 컨테이너 기술의 차이
### Legacy
- 하나의 물리 서버에 애플리케이션 배포
- 애플리케이션간 라이브러리나 미들웨어 버전의 충돌이 발생할 수 있음
### Hosted Hypervisor(가상화 소프트웨어)
- Virsual Box, VMWare, Parallels 와 같은 소프트웨어
- 호스트 OS 위에 가상화 소프트웨어를 설치해서 가상환경 구축
- 간편하게 사용할 수 있어 클라이언트 PC 에서 개발환경을 구축하거나 테스르를 위해 주로 사용
- 컨테이너와는 다르게 Guest OS 가 존재하여 오버헤드가 비교적 크다.
    - OS 위에 OS 를 실행하는 것이므로 리소스 (CPU, 메모리 등)을 할당하는데 작업이 필요

### Bare Metal Hypervisor
- Hyper-v, XZenServer, ESXI Server 등이 있다.
- Host OS 없이 하드웨어에 직접 하이퍼바이저를 설치
- Host OS 가 없어 지원을 효율적으로 사용할 수 있다.
    - 하드웨어가 제어
    - 오버헤드가 비교적 적다.
- 가상 머신들을 관리하기 위한 콘솔이 필요

### Container
- Docker, containered, CRI-O 등이 컨테이너 런타임으로 있음
- Guest OS 가 없고 Host OS의 커널을 공유하여 오버헤드가 적고 가벼워 빠르다
    - OS 실행 없이 별도의 환경에서 애플리케이션 실행이 가능
- 이식성과 확장성이 높다.

## 이제 진짜 Docker를 알아보자?
- Docker는 컨테이너 기술을 사용하여 애플리케이션에 필요한 환경을 신속하게 구축하고 테스트 및 배포를 할 수 있게 해주는 플랫폼
- 무료로 제공해주는 CE과 EE으로 나뉘고 아래와 같은 플랫폼들에서 작동 가능하다.
```
- Linux
    - Ubuntu
    - CentOS
    - Debian
- Cloud
    - Azure
    - AWS
- Windows10
- MacOS
- ETC
```
- 등 널리 사용되고 있는 대부분의 환경에서 모두 구동 가능하다.

## Docker Image
- 컨테이너를 생성하는 기반이 되는 것은 이미지임.
- 이미지는 컨테이너를 실행하는데 필요한 모든 것을 포함하고 재사용이 가능.
- 클래스와 인스턴스의 개념, 붕어빵과 붕어빵틀 이라고 생각하면 쉽게 이해 가능
- 단순히 개발하고 있는 애플리케이션만 이미지 형태로 만들어 배포하는 것이 아니라 DB,Web/was 처럼 미들웨어로 사용되는 프로그램들 혹은 다른 OS 환경을 실행하기 위한 이미지가 Docker 이미지 Repository 에 배포되어 있어 받아서 사용하면 된다.
```
예시
- oracle 이미지를 받아서 컨테이너를 생성하고 DB 로 활용
- Java,Apache/Tomcat이 설치되어 있는 이미지를 받아서 그 위에 애플리케이션을 올리고 재 배포
- Windows 에서 CentOS 운영체제를 사용하기 위해 CentOS 이미지를 받아서 사용
```

## 개발과 배포의 흐름
1. 개발자가 개인 pc 에서 애플리케이션을 개발하고 레포지토리에 배포
2. 래포지토리에서 애플리케이션을 받아 테스트환경에서 테스트
3. 레포지토리에서 애플리케이션을 받아 *스테이징 환경*에서 서비스를 구동하기 위한 모든 애플리케이션을 테스트
4. 실환경에 애플리케이션을 배포
- 스테이징 환경 ? : 실환경과 똑같지만 규모가 작은 환경이라고 생각하면됨

### 문제점?
- 무겁다
- 이식과 확장에 불리하다
- 관리가 복잡하다

## Containerized Applications
- Docker 를 사용해서 서비스를 운영한다 -> 애플리케이션을 컨테이너화했다.
1. 개발자가 개인 pc 에서 Docker 이미지를 빌드해서 레포지토리에 배포한다.
2. 테스트, 스테이징, 프로덕션 환경에 Docker 프로그램만 설치하고 배포된 애플리케이션 이미지를 받아 실행 후 ㅊ테스트한다.
    - 애플리케이션에 필요한 미들 웨어도 컨테이너로 받아서 사용한다.
    - 애플리케이션에 필요한 모든 요소들은 컨테이너로 받고 각종 ops 툴들을 이용해서 관리할 수 있다.

- 애플리케이션을 컨테이너화 -> 개발과 배포의 흐름이 매우 간단해져서 바르게 진행될 수 있는 것을 확인할 수 있음.
- 컨테이너에 대한 관리를 kubernates 등을 사용하면 인프라가 코드화되어 편리하게 관리 할 수 있음.

## 그래서 난 무엇을 배워야하는가?
1. Docker 책 대여 -> 이후 빠르게 리딩, 실습하면서 도커환경에 익숙해지기
2. 이후 쿠버네티스, jenkins 등의 ops 툴을 실습
3. 연동하고 그런건 인터넷을 찾아보고, 패스트캠퍼스 강의를 통해 실습해볼 예정. 