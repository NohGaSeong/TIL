# Prometheus란?
- 프로메테우스는 메트릭 수집, 시각화, 알림, 서비스 디스커버리 기능을 모두 제공하는 오픈 소스 모니터링 시스템이다.

## 대표적 기능?
- 풀 방식의 메트릭 수집, 시게열 데이터 저장
- PromQL을 활용하여 저장된 시게열을 쿼리 및 집계
- 서비스 디스커버리
- 데이터 시각화

## 아키텍처의 내용물들을 알아보
![image](https://user-images.githubusercontent.com/82383294/195117030-9c553583-dc3c-47f0-ab5f-e0abce9c1eb8.png)

### Prometheus
- 시게열 데이터 저장
### Exporter
- 다양한 서비스/시스템의 메트릭을 수집한다.
### Client Library
- 애플리케이션 코드를 계측하기 위해 쓰인다.
### Pushgateway
- 앞에 두 개의 컴포넌트가 수집하기 어려운 배치 데이터 등을 수집할 때 사용된다.

### Alertmanager
- 특정 메트릭이 임게치가 넘어가거나 경계에 잡혔을 때 이메일, 슬랙등을 통해서 알람등을 보내줄 수가 있음.
- UI 기능이 있어 데이터를 시각화할 수 있음.
- 자체적인 시각화 기능은 약한 편이며 보통 Grafana 라는 오픈소스 대시보드 툴로 Prometheus UI를 대체하는 편이다.

## 더 다른 기능?
### 서비스 디스커버리 기능을 제공
- 마이크로 서비스가 대중적으로 유행하는 지금 상황 -> 인스턴스는 다이나믹하게 스케일 인/아웃이 된다. (이를 수동으로 관리하기는 불가능에 가까움)
- 프로메테우스는 여러 서비스 디스커버리와 통합할 수 있다.
- 예를 들자면 쿠버네티스 서비스 디스커버리와 통합하여 쿠버네티스 클러스터에 존재하는 모든 노드와 팟들의 매트릭을 수집 가능

### 추가
- 애초에 스케일 아웃을 고려하지 않고 설계됨.
- 그래서 데이터가 많으면 많을수록 이를 어떻게 해결해야 할까라는 고민때문에 도입하기 쉽지 않음.
- 하지만 클러스터링을 위ㅣ한 Thanos, Cortex 등 여러 오픈 소스가 개발되면 서 이 문제가 상당 수 해결되었다.

## 사용하기에 적합한 일, 적합하지 않은 일
### 적합한 일
- 메트릭 기반의 시계열 데이터를 저장하는 일
- 동적인 혹은 마이크로 서비스의 인스턴스에 대한 메트릭을 수집하는 일
### 적합하지 않은 일
- 이런건 다른 도구를 이용해서 해결함
- 이벤트 로그나 개별 이벤트를 저장하는 일
- 이메일 주소/사용자 이름과 같이 카디널리티가 높은 데이터를 저장하는 일
- 100%의 정확성이 요구되는 일
