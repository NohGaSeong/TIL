## 클라우드 컴퓨팅과 가상화
- 모든 클라우드의 운영 기술의 토대는 가상화라고 할 수 있다.
- 가상화 기술을 사용 -> 단일 물리 서버의 하드웨어 리소스를 더 작은 단위로 나눌 수 있으며, 물리 서버는 가상 머신 여러 개를 호스트할 수 있다.
- 가상 머신은 자체적을 메모리, 스토리지, 네트워크를 지니고 있으면서 자신만의 운영 체제를 독자적으로 실행 할 수 있다.
- 가상화는 리소스를 집적해서 사용하므로 하드웨어의 가치를 최대한 끌어낼 수 있고, 실험과 샌드박스 환경 또한 쉽게 생성할 수 있다.

## 클라우드 컴퓨팅 아키텍처
- 클라우드 사업자는 잘 구현된 가상화 환경을 통해 스토리지, 메모리, 컴퓨팅 성능, 네트워크 대역폭 등의 리소스를 가장 효율적으로 조합한 가상 서버를 제공한다.
- 온디맨드란 사용량을 측정하고, 사용량에 따라 비용을 청구하는 방식이다.
- 그러기에 사용자가 원하는 금액에 맞춰 리소스를 사용할 수 있다.

## 클라우드 컴퓨팅 최적화
클라우드는 확작성과 탄력성을 갖추고 있고 기존 인프라보다 저렴하다. 클라우드이 효율적 배포를 위한 3가지 요소는 아래와 같다.

### 확장성
- Auto Scaling 서비스를 통해서 머신 이미지를 신속하게 복제하고, 업무 처리에 필요한 다수의 인스턴스를 자동으로 추가할 수 있다.
### 탄력성 
- 변화하는 수요를 관리한다는 점에서 확장성과 같은 목적을 지니고 있다.
- 수요가 떨어질 때 용량을 자동으로 줄이는 개념이라는 점에서 확장성과 차이를 가지고 있다.
### 비용 관리
- 사용 리소스를 엄격하게 관리하여 비용을 통제할 수 있다.
- 새 서버를 배포하기 위해선 서버 컴퓨터를 설치할 공간, 냉각, 전기, 보안 비용들이 들어가는데 그것들을 신경 쓰지 않고 운영 비용에만 코스트를 사용할 수 있다.

## AWS 클라우드
aws 생태계에는 혁신적인 새로운 서비스가 계속해서 추가되고 있으며, 솔루션스 아키텍트는 이들 중 핵심 서비스의 개요와 주요 기능, 활용 방법 등을 자세하게 알고 있어야 한다.

### aws 서비스 범주
#### 컴퓨팅
데이터 센터에서 물리 서버가 하는 역할을 복제한 클라우드 서비스. 오토 스케일링, 로드 밸런싱, 서버리스 아키텍쳐에 이르는 고급 기능을 제공한다.

#### 네트워킹
애플리케이션 연결, 엑세스 제어, 향상된 원격 연결

#### 스토리지
빠른 엑세스와 장기적인 백업 요구에 모두 적합하게 설계된 여러 종류의 스토리지 플랫폼

#### 데이터베이스
관계형, NoSQL, 캐싱 등 데이터 형식에 필요한 사용 사례에 사용할 수 있는 관리형 데이터 솔루션

#### 애플리케이션 관리
aws 게정 서비스와 운영 리소스 모니터링, 감사, 구성

#### 보안과 자격 증명
인증 및 권한 부여, 데이터 및 연결 암호화, 타사 인증 관리 시스템과 통합 등을 관리하는 서비스

#### 애플리케이션 통합
결합 해제, 통합, API 를 사용한 애플리케이션 개발 프로세스를 설계하기 위한 도구

## AWS 핵심 서비스
### 컴퓨팅
#### EC2
- 로컬 데이터 센터에서 실행되는 서버를 가상 인터넷버전으로 옮겨 놓은 것이다.
- cpu, 메모리, 스토리지, 네트워크 인터페이스 프로파일로 프로비저닝해 간단한 웹 서버 부터 멀티 티어 아키텍쳐의 인스턴스 클러스터에 이르기까지 어떠한 애플리케이션 요구라도 충족할 수 있음. 
- 가상화 기반이기에 훨씬더 효율적이고 빠르게 배포한다.

#### Lambda
- aws lambda 서비스와 같은 서버리스 애플리케이션 아키텍처를 사용하면 서버를 구축하고 연중무휴로 운영하지 않더라도 요청을 처리할 수 있는 퍼블릭 서비스를 제공할 수 있다. 
- 이 서비스는 소비자 요청과 같은 네트워크를 통한 이벤트가 있어야 미리 정의된 코드 기반 작업을 작동시킬 수 있다.
- 최대 15분의 작업이 완료되면 lambda 이벤트는 끝나고 모든 리소스가 자동으로 종료된다.

#### Auto Scaling
- 실행 중인 EC2 인스턴스 사본을 이미지 템플릿으로 정의, 기존 인스턴스가 클라이언트의 수요에 대응할 수 없을 때 자동으로 인스턴스를 시작할 수 있다.
- 수요가 감소하면 사용하지 않는 인스턴스를 종료할 수 있다.

#### Elastic Load Balancing
- 과부하가 걸리지 않도록 유입되는 네트워크 트래픽을 여러대의 웹서버로 전송한다.

#### Elastic Beanstalk
- AWS 컴퓨팅과 네트워킹 인프라를 프로비저닝하는 작업을 추상화한 관리형 서비스. 
- 애플리케이션 코드를 입력하는 것 외에 아무것도 할 필요가 없음.

### 네트워킹
#### VPC
- EC2나 RDS 인스턴스 등을 호스팅하기 위해 설계된 고수준의 네트워크 환경

#### Direct Connect
- 타사 공급자가 제공하는 네트워크를 통해 aws 에 빠르고 안전하게 연결할 수 있다.
- 로컬 데이터센터 혹은 사무실과 aws vpc 간에 향상된 직통 터널을 구축할 수 있다.

#### Route 53
- 도메인 등록, 레코드 관리, 라우팅 프로토콜, 상태 검사를 관리할 수 있는 AWS DNS 서비스로, 다른 aws 리로스와 완벽하게 통합되어 있다.

#### CloudFront
- 분산 글로벌 콘텐츠 전송 네트워크.
- 사이트 콘텐츠의 캐싱 버전을 전 세계 엣지 로케이션에 저장하고 사용자가 요청할 때 최고 효율성과 짧은 지연 시간으로 콘텐츠를 제공할 수 있음.


### 스토리지
#### s3
- 저렴하고 안정적인 다목적 객체 스토리지를 제공.
- 데이터 스토리지와 백업 용도에 적합하다. 
- 스크립트, 템플릿, 로그 파일을 저장할 수 있다.

#### Glacier
- 저렴하게 장기 저장하 수 있는 대형 데이터 아카이브 제공

#### EBS (Elastic Block Store)
- EC2 인스턴스 os 와 작업 데이터를 호스팅하는 가상의 데이터 드라이브
- 물리 서버의 스토리지 드라이브와 파티션이라는 개념을 사용한다.

#### Storage Gateway
- aws 클라우드 스토리지를 로컬 온프레미스 어플라이언스처럼 사용하는 하이브리드 스토리지 시스템.
- 스토리지 게이트웨이는 마이그레이션 및 데이터 백업에 훌륭한 도구이며 재해 복구 작업에 사용할 수 있다.

### 데이터베이스
#### RDS (Relational Database Service)
- 안정적이고, 안전하며, 신뢰성 있는 데이터베이스 인스턴스를 구축할 수 있게 하는 관리형 서비스
- 다양한 SQL 데이터베이스 엔진을 RDS에서 실행할 수 있다.

#### DynamoDB
- 빠르고 유연하고 확장성이 뛰어난 관리형 서비스로 비관계형(NoSQL) 데이터베이스 워크로드에 적합하다.


### 애플리케이션 관리
#### CloudWatch
- 이벤트를 통해 프로세스 성능 및 활용률을 모니터링 하고 사전 설정된 임곗값에 이르면 메시지 발송이나 자동화된 작업을 트리거하도록 설정할 수 있다.

#### CloudFormation
- 복잡한 AWS 배포를 템플릿 파일에 완벽하게 정의할 수 있다.
- AWS 리소스 사용을 스크립트화 할 수 있으므로 애플리케이션 시작 프로세스를 더 쉽고 매력적으로 자동화, 표준화, 가속활 할 수 있다.

#### CloudTrail
- 게정 내 모든 API 이벤트 기록을 수집한다. 
- 이 기록은 계정을 감사하고 문제를 해결하는데 유용하다.

#### Cofig 
- AWS 계정에서 변광 관리와 구정 준수를 지원하도록 설계됐다.
- config 에서 처음에 목표 구성 상태를 정의하고 나면, 그 후 변경된 모든 상태와 목표 상태의 차이를 평가한다. 변경된 구성상태가 목표 범위를 벗어나면 알림이 발송된다.

### 보안과 자격
#### IAM (Identify and Access management)
- iam 에서 aws 계정의 사용자, 프로그래밍 방식 액세스, 인증을 관리한다.
- 사용자 그룹, 역할, 정책을 사용해서 aws 리소스에 액세스하고 작업할 수 있는 사람과 대상을 정확하게 제어할 수 있다.

#### KMS(Key Management Service)
- aws 리소스의 데이터를 보호하는 암호화 키를 생성하고 키 사용을 관리하는 관리형 서비스

#### Directory Service
- aws 환경에서 자격 증명이나 관계를 관리해야 할 때, 이 서비스를 사용하여 aws 리소스를 amazon cognito 나 microsoft AD 도메인과 같은 자격 증명 공급자와 통합할 수 있다.

### 애플리케이션 통합
#### SNS (Simple Notification Service)
- 자동으로 주제에 관한 알림을 다른 서비스 (SQS 대기열, Lambda 함수 트리거 등), 모바일 장치, 전자 메일, SMS를 사용하는 수신자에게 보내도록 하는 알림 도구.

#### SWF(Simple WorkFlow)
- 수행해야 하는 일련의 작업을 조정할 수 있다.
- '접착제', '윤활유' 가 돼서 복잡한 프로세스의 속도를 높이고 각 구성 부분을 연결한다.

#### SQS (Simple Queue Service) 
- 분산 시스템 내에서 이벤트 중심 메시징으로 결합을 해제해서 대형 프로세스의 개별 단계를 조정할 수 있다.
- SQS 메시지에 포함된 데이터는 안정적으로 전달되므로 애플리케이션내의 결함성을 향상시킬 수 있다.

#### API Gateway
- aws에 구현한 애플리케이션을 위해 안전하고 안정적으로 API를 생성, 관리할 수 있게 한다.

## AWS 플랫폼 아키텍처
![](https://velog.velcdn.com/images/noyohanx/post/43941df9-36fe-4812-8160-bf44b0f5ff6a/image.png)

## AWS 안정성과 규정 준수
AWS는 오랫동안 인프라 관리와 관련한 리소스 및 전문 지식에 많은 계획을 세우고 상당한 자금을 투자했고, 강력한 데이터 센터 보호 및 기밀 유지, 여러 계층으로 중복 구성, 신중하게 개발된 모범 사례 규칙 등 다른 기업이 쉽게 모방할 수 없는 노력을 기울여왔음.

aws 플랫폼 리소스는 iso 9001, fedramp, nist, gdpr 등 수십 개 국가 및 국제 표준, 프레임워크, 인증을 준수한다.

### AWS 공동 책임 모델
aws 플랫폼과 리소스의 보안에 대한 책임은 aws와 사용자가 책임을 분담하는 구조를 따르고있다. 
클라우드 인프라를 안정적으로 관리하는 일 -> aws 의 책임
aws 리소스를 사용하는 것 -> 사용자의 일 (그에 따른 책임도 사용자에게)

### AWS 서비스 수준 계약
지진등의 자연재해로 인해 장애가 생긴다면 aws는 가동 시간이 정해진 임곗값 아래로 떨어질 때마다 고객에게 발생하는 직접 손실을 서비스 크레딧으로 보상하되, 고객 신뢰나 비즈니스 손실에 대한 보상은 하지 않는다.
## AWS 작업
### AWS CLI
간단한 스크립트로 작업을 진행할 수 있다. 클릭클릭클릭으로 인스턴스를 만드는 것보다 명령어 몇 줄로 인스턴스를 생성하는게 한눈에 보기도 쉽고, 만들기도 쉬울 것이다.
### AWS SDK
aws 리소스에 액세스하는 작업을 애플리케이션 코드에 통합하려면 쓰고 있는 언어에 맞는 aws sdk 를 사용해야한다. 
현재 aws 는 java, .net, python 등 9개의 언어를 위한 sdk 와 모바일 sdk를 제공한다.

### 기술 지원 및 온라인 리소스
aws 는 다양한 유형의 지원이 있으며, 지원마다 어떤 내용이 있는지 이해할 필요가 있다.
aws 에서 계정을 새로 만들 때 기술 지원 플랜을 선택해야 하는데, 비즈니스 필요와 예산에 따라 결정할 수 있다.

### 지원 플랜
기본 플랜 : 모든 계정에 무료로 제공, 문서, 백서, 지원 포럼 등의 고객 서비스에 액세스할 수 있고, 청구 및 계정 지원 문제가 포함된다.

개발자 플랜 : 월 29$, 계정 소유자 한 명만 일반적 지침과 '시스템 손상'에 관해 문의할 수 있으며 클라우드 지원 담당자가 응답한다.

비즈니스 플랜 : 월 100$ 이상, 문의 할 수 있는 사용자 수에 제한이 없고, 신속한 응답을 보장한다. '시스템 손상', 갭별적 지침, 문제 해결, 지원 API 등의 서비스를 제공한다.

엔터프라이즈 지원 플랜 : 다른 지원의 내용을 포함하고 운영과 설계 검토를 위한 AWS 솔류션스 아키텍트의 지원, 전담 기술 지원, 관리자 지원, 컨시어지 지원 추가됨. 엔터프라이즈 플랜은 복잡한 미션 크리티컬 배포에 큰 도우밍 될 수 있지만, 매월 최소 15,000$ 를 지급해야한다.

## 요약
- 클라우드 컴퓨팅 : 물리적 리소스를 작고 유연한 가상 단위로 나누는 기술에 기반을 둠.
- 가상 리소스 : 종량제로 임대해서 저렴하게 사용 가능, 확장성 + 탄력성 제공
- 전 세계에 분산된 리전과 가용 영역을 통해 리소스를 제공, 복제해서 안정성+보안성 유지
- 컴퓨팅, 네트워킹, 데이터베이스, 스토리지, 보안, 애플리케이션 관리 및 통합 등 핵심 서비스 수는 계속 늘어나고 있어서 웬만한 디지털 요구 사항들은 다 처리 가능.
- aws 리소스 = aws cli 로 관리 가능, sdk 로 생성한 코드로도 관리 가능.
- 기술 및 계정 지원에는 지원 플랜, 설명서, 포럼이 있고, 사용 설명서, 개발자 안내서, 백서를 제공함.
