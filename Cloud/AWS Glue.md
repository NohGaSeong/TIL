# AWS Glue
![image](https://user-images.githubusercontent.com/82383294/225801128-0b2f4005-ddea-4236-989d-6b34560f5513.png)

<br>
AWS Glue에서 작업을 정의하여 데이터 원본에서 데이터 대상으로 데이터를 추출,변환,로드하는 데 필요한 작업을 수행함. 일반적으로 다음 작업 수행가능.
<br>

- 데이터 스토어 소스의 경우 크롤러를 정의하여 메타데이터 테이블 정의로 aws glue data catalog를 채움. 데이터 스토어에서 크롤러를 포인트하며 크롤러는 data catalog에서 테이블 정의를 생성함. 스트리밍 소스의 경우 data catalog 테이블을 수동으로 정의하혹 데이터 스트림 속성을 지정함. 테이블 정의에 관련해 추가하자면 aws glue data catalog는 다른 필수 메타데이터를 포함하여 etl 작업을 정의함. 작업을 정의하여 데이터를 변환했을때 이 메타데이터를 사용함.
- aws glue 스크립트를 생성하여 데이터를 변환할 수 있음. 또는 스크립트를 aws glue 콘솔이나 api에 제공함.
- 필요시 작업하거나 지정된 trigger가 발생하면 작업을 설정하여 시작할 수있음. 트리거는 시간 기반 스케줄이나 이벤트일 수 있음.
- 작업이 진행되면 스크립트는 데이터 원본에서 데이터를 추출하고 데이터를 변환한 다음 데이터 대상으로 로드함. 스크립트는 aws glue 의 apache spark 환경에서 실행됨.

## AWS Glue의 용어
aws glue는 여러 구성 요소의 상호 작용에 의존하여 추출,변환 및 로드(ETL)워크 플로를 생성하고 관리함.

### 분류자
데이터 스키마를 결정함. aws glue는 csv, json, avro, xml 등과 같은 일반 파일 형식에 대한 분류자를 제공함. JDBC 연결을 사용한 일반 관계형 데이터베이스
관리 시스템을 위한 분류자를 제공함. a grok 패턴을 사용하거나 xml 문서에 행 태그를 지정하여 자체 분류자를 작성할 수 있음.

### 연결
특정 데이터 스토어에 연결하는 데 필요한 속성을 포함하는 data catalog 객체임

### 크롤러
데이터 스토어(소스 또는 대상)에 연결하는 프로그램은 분류자의 우선 순위 지정 목록을 통해 데이터의 스키마를 결정한 다음 aws glue data catalog에 메타데이터 테이블을 생성함.

### 데이터베이스
논리 그룹으로 구성된 일련의 연결된 data catalog 테이블 정의

### 데이터 스토어, 데이터 원본, 데이터 대상
데이터 스토어는 데이터를 영구적으로 저장하기 위한 리포지토리. 예를 들면 s3 버킷과 관계형 데이터베이스. 데이터원본은 프로세스 또는 변환의 입력값으로 사용되는 데이터 스토어임. 데이터 대상은 
프로세스 또는 변환에서 쓰기를 수행하는 대상 데이터 스토어

### 개발 엔드포인트
aws glue etl 스크립트를 개발하고 테스트하는데 사용할 수 있는 환경임

### 동적 프레임
구조 및 배열과 같은 중첩 데이터를 지원하는 분산 테이블. 각 레코드는 자기 설명적이며 반정형 데이터가 있는 스키마 유연성을 위해 설계됨. 각 레코드
에는 데이터와 해당 데이터를 설명하는 스키마가 모두 포함되어있음. ETL 스크립트에서 동적 프레임과 apache spark data frame을 모두 사용하여 이 두 프레임 같ㄴ에 변환
할 수 있음. 동적 프레임은 데이터 정리 및 etl에 필요한 고급 변환 세트를 지원함.

### 작업
작업은 etl 작업을 수행하는 데 필요한 비즈니스 로직임. 변환 스크립트, 데이터 원본 및 데이터 대상으로 구성됨. 작업은 트리거에 의해 시작되고
트리거는 예약되거나 이벤트 기반으로 작동할 수 있음.

### 노트북 서버
pyspark 설명문을 실행하기 위해 사용되는 웹 기반 환경임. pyspark 는 python 의 etl 프로그래밍 언어. 노트북 서버를 개발 엔드포인트에 설정하여
aws glue 확장을 통해 Pyspartk 설명문을 실행함

### Script
소스에서 데이터를 추출하고 변환하고 대상으로 로드하는 코드. aws clue는 pyspark 또는 scala 스크립트를 생성함

### 표
데이터를 나타내는 메타데이터 정의. 데이터가 s3 파일, rds 테이블 또는 다른 데이터 집합에 있는지에 관계없이 테이블은 데이터의 스키마를 정의함. aws glue
data catalog의 테이블은 열 이름, 데이터 유형 정의, 파티션 정보 및 베이스 데이터 세트에 대한 기타 메타데이터로 구성됨. 
데이터의 스키마는 aws glue 테이블 정의에 나타남. 실제 데이터는 파일 혹은 관계형 데이터베이스 테이블 어디에 있든지 기존 데이터 스토어에 
남겨짐. aws glue는 파일과 관계형 데이터베이스 테이블 목록을 aws glue data catalog에 작성함. etl 작업을 생성할 경우 소스와 대상로써 사용됨.

### 변환
다른 포멧으로 데이터를 바꾸는 코드 로직

### 트리거 
ETL 작업 시작, 트리거는 정해진 시간 혹은 이벤트 기반으로 정의 가능

### 작업자
glue 를 사용하면 etl 작업을 실행하는 데 걸리는 시간 요금만 결제하면됨. 관리할 리소스와 사전 투자 비용이 없으며 시작 시간 또는 종료 시간에 대한
요금이 부과되지 않음. ETL 작업을 실행하는 데 사용된 데이터 처리 단위(DPU) 수에 따라 시간당 요금이 청구됨. 단일 데이터처리 단위(DPU)를
작업자라고도함. aws glue에는 작업 대기 시간 및 비용 요구사항을 충족하는 구성을 선택하는 데 도움이 되는 세 가지 작업자 유형이 있음. 
작업자는 표준, G.1X, G.2X 및 G.025X 구성으로 제공됩니다.

