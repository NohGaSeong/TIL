# 2.운영 서버 환경의 구성

1장에서 나왔단 운영 서버 관리의 세 단계 중 첫 번째인 '환경 구성' 에 대해 배워볼게요.<br>
운영 서버에서 자주 사용되는 아키텍처부터 알아보면서 어떤 구성 요소들이 운영 서버 아키텍처를 이루는지 알아보고<br>
작성한 소스코드를 실행할 수 있는 서버 인스턴스를 생성하는 것부터 서버 내부 환경을 구성하는 방법도 배울거에요.

실습 : 각 명령어가 어떤 작동을 하는지 특정 상황에서는 왜 sudo를 이용해 root 권한을 사용하는 것인지를 설명해요. 무작정 따라치지 말고 이해해보도록해요🙃

## 2.1 운영 서버 아키텍처의 이해
자주 이용되는 운영 서버 아키텍처들을 알아보면서 운영 서버가 어떻게 구성돼 있는지 알아보자
### 2.1.1 단일 서버
가장 기본적인 구성. 요청을 보내는 클라이언트, 요청을 처리하는 서버가 한 대 있어요. 여기서 얘기하는 클라이언트는 휴대폰 앱이나 웹 브라우저를 의미해요.
서버 내에서는 에플리케이션 코드와 데이터베이스가 실행되고있고요. 단순한 구성인만큼 환경을 구축하기 쉬워 테스트 서버나 간단한 애플리케이션을 서비스할때 많이 사용돼요.
그리고 데이터 베이스와 애플리케이션이 같은서버에서 실행되고 있기에 별도의 네트워크 설정을 할 필요 없이 로컬 호스트를 대상으로 하면돼요. 하지만 단점도 여러가지 있겠죠?

- 전체 서비스에 장애가 생길 확률이 높아요.
- 서버 자원을 효율적으로 사용하기 어려워요.
- 보안성이 떨어져요.
- 서버의 수를 여럳로 늘려서 자원을 확장하는 스케일 아웃이 힘들어요.

### 2.1.2 애플리케이션/데이터베이스 서버 분리
단일 서버 구성에서 DB를 별도의 서버로 분리한 구성이에요. 애플리케이션과 DB가 다른 자원을 사용하기 때문에 단일 서버의 단점들이 커버돼요. 다만 두 대의 서버를 관리하기 때문에 구성이 조금 더 복잡해지고 서버 사이의 지연 시간과 네트워크 보안을 고려해야해요. 그리고 클라이언트에서는 하나의 서버를 바라보고 있기 때문에 서버 자원 확장을 위해 서버의 수를 늘리는 스케일 아웃은 여전히 힘들어요.

### 2.1.3 서버 단위의 로드 밸런스
클라이언트가 애플리케이션을 실해앟는 서버와 직접 통신하는 대신 로드 밸런서라는 서버와 통신하고 그 뒤에 여러 대의 애플리케이션 서버를 두는 방식이에요. 

클라이언트 -><- 로드 밸런서 -><- 서버 <br>
이런식으로 클라이언트는 로드밸런서랑만 통신을 해요. 로드 밸런서가 서버와 클라이언트 중간에 있는 징검다리? 역할을 해줘요.

### 2.1.4 서버 내 앱 단위의 로드 밸런서
여러 서버에게 요청을 분산하는 서버 단위의 로드 밸런서 외에도 여러 애플리케이션 프로세스들에 요청을 분산시키는 앱 단위의 로드 밸런서가 추가됐어요. 애플리케이션 서버 안에서 똑같은 애플리케이션을 여러 프로세스로 만들어 실행해 놓고 외부에서 들어온 요청을 프로세스 중 하나로 보내주는 역할을 하는 방식이에요. <br>
이처럼 구성하면 하나의 서버에 여러 개의 프로세스를 실행해 하나의 서버에서 여러 개의 요청을 동시에 처리할 수 있으며 서버 자원을 최대한으로 사용할 수 있는 만큼의 프로세스를 실행해 서버 자원도 더욱 효율적으로 사용할 수 있어요.

## 2.2 AWS EC2를 이용한 서버 인스턴스 생성과 관리
EC2 = 우리가 원하는 대로 돈 내고 사용하는 가상 서버. 대부분의 OS 지원. 사용 목적에 맞는 수십 가지 사양들을 제공.

### 2.2.2 EC2를 생성하려면 꼭 알아야하는 개념
1. AMI(Amazon Machine Image)
2. 보안 그룹(Security Group)
3. 키 페어(Key pair)

