# API GATEWAY 실습
## API GATEWAY 생성

우선 저희는 HTTP 게이트웨이로 할 것이기 때문에 HTTP 게이트웨이 구축을 눌러주시면 생성 창으로 넘어가는데 아래와 같이 입력해주세요.

별거 없죠? 바로 검토 및 생성을 누르시고 생성해주세요. 어떠한 설정도 되어있지 않은 빈 API gateway 가 생성돼요. 여기서 주목할 것은 스테이지라고 되어있는 부분을 보면 URL 호출에 있는 URL이
우리가 만든 API의 접근 링크에요.

그 링크에 들어가면 아래 같은 화면이 뜹니다. 아직 아무것도 설정해놓지 않았기때문에 그래요.

## 해결하고자 하는 문제 소개
API 서비스 2개를 띄워놨다고 합니다. 위쪽에 있는 API는 픽에 대한 , 글에대 한 정보를 가진 API 구요 아래 쪽에 있는 API는
사용자 정보에 대한 API 에요. 서로 다른 웹 사이트죠

그리고 저희는 우리가 생성한 API라는 것을 일종의 대문으로해서 사용자들이 어떤 경로로 들어오면
토픽으로 보내고 어떤 경로로오면 유저 스스로 보내는 myapi 설정을 경로설정을할거에요.

## 경로 설정

이쪽 창에 들어가셔서 create 를 눌러주세요. 이때 이 부분은 위 소스를 정합니다. 이때 이 부분은 위 소스를 정합니다.
즉 사용자가 예를 들어서 topics 라는 주소로 접속했다. 그럼 우리의 api 게이트웨이 주소에서는 topics 라는 저 주소로 들어온
것이겠죠? 그떄 이 사용자가 만약의 어떤 방식으로 들어오면 어떻게 할 것이지를 우리가 지정하는 메소드인거에요. POST 나 GET을 하셔도 되지만
ANY 를 선택하면 어떤 메소드 방식으로 접속을 하건간에 그것들을 처리하는 경로를 생성하겠다는 뜻이에요.

설정하고 생성 눌러줍시다.

자 그러면 topics 라는 리소스로 들어오는 어떠한 api건 간에 어떻게 처리할 것인지를 우리가 지정할 수 있는거에요. 자 여기 보면

## 통합 설정
통합 연결이라는 버튼이 있는데 이걸 클릭하던가 통합 메뉴에 들어가 any 메소드를 서택해도 똑같은 결과가 나와요. 통합 생성 및 연결
버튼을 눌러줍시다. 

my-api 로 topics 라는 경로로 어떠한 메소드로 접속하건 간에 누구에게 이 리퀘스트를 전달한 것인가를 지정하는겁니다.
람다를 지정할 수도 있고 http uri 를 지정할 수도 있어요.

URL에다가 뭘 넣어야할가요 바로 여기있는 topics에 대한 서비스를 하고 있는 api 도메인을 여기다가 적어줍니다. 자 그러면 어떠한 메소드 간에 
토픽스로 들어오면 그 메소드를 이 url로 전달한다 라는 뜻이에요. get이로하면 my-api 어떠한 메서드가 들어오던간에 무조건 겟으로 보낸다는 의미에요 .
any 로 설정을 한다면get이면 백엔드 get, post면 백엔드 post로 

이제 접속을 해보면 이쪽에 있는 빽엔드 있는 정보를 우리의 api 게이트웨이가 읽어서 최종적으로 사용자에게 보여주는 것을 볼 수 있어요.

다른것도 같은 방법으로 연결하면돼요. 예를 들어 users api를 연결 시키고 싶다면
/users 로 해서 topics와 같은 방법으로 만들어주면되겠죠?

이것이 바로 api gateway의 가장 기본적인 의미, 용도에요.
단일 진입점인 api 게이트에이로 들어오는 사용자의 요청을 적당한 뺵엔드로 매핑 시켜준다. 또는 라우팅 시켜준다 또는 연결시켜 준다 라는 것을 하는 것이 api 게이트웨이인것이에요.

## 앞으로 공부할만한 주제?
람다 , aws의 다른 서비스와 연동 시키는 서비스 공부 
권한 부여 : api 에다가 인증을 붙히고 싶을때
CORS : 같은 도메인에 잇는 데이터를 브라우저를 이용해 에이젝스와 같은걸 통해 호출하는 것은 허용이 되는데 다른
도메인에 있는 api를 호출하는 것은 허용이 되지 않음. 이런것들을 허용하고 싶을 때 사용합니다. (정책)

설정을 내보내기에서 백업할 수도 있고, 다시 가져오기로 빠르게 복구할 수 있습니다.

자동 배포를 원하지 않을때, 이 배포-스테이지를 봐보자

모니터링 부분 : 지표와 로깅.
